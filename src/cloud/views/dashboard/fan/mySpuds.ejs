<% include ../parts/head %>

<% include ../parts/bodyStart %>

<div class="tab-content clearfix">
	
	<h1 class="border-bottom"><i class="icon-microphone icon-large margin-right5"></i>Create SPUDS</h1>
	
	<div class="row-fluid">
		<div class="span8">
			<% include modals/tag %>
			<% include modals/tagTeam %>
			<% include modals/tagCoach %>
			<% include modals/tagPlayer %>
			<% include modals/tagLeague %>
			<% include modals/tagTournament %>
			<% include modals/tagField %>
	
			<div class="row-fluid create-spuds-modals" id="create-spuds-buttons">
			
				<div class="span3 text-center btn-orange" modal-id="#images-modal">
					<h3>Images</h3>
					<i class="icon-camera icon-huge"></i>
					<% include modals/images %>
				</div>
				<div class="span3 text-center btn-orange" modal-id="#videos-modal">
					<h3>Videos</h3>
					<i class="icon-facetime-video icon-huge"></i>
					<% include modals/videos %>
				</div>
				<div class="span3 text-center btn-orange" modal-id="#updates-modal">
					<h3>Updates</h3>
					<i class="icon-headphones icon-huge"></i>
					<% include modals/updates %>
				</div>
				<div class="span3 text-center btn-orange" modal-id="#announcements-modal">
					<h3>Announcements</h3>
					<i class="icon-volume-up icon-huge"></i>
					<% include modals/announcements %>
				</div>
			</div>
		</div>
	</div>
	
	<div class="row-fluid" id="view-spuds">
		<div class="span8">
			<h5>View SPUDS on the <a class="btn btn-orange btn-small" href="/dashboard">SPUDS FEED</a></h5>
		</div>
	</div>

</div>

<% include ../parts/scripts %>

<script src="/media/dashboard/js/jquery-ui-1.10.3.custom.min.js"></script>
<script src="/media/dashboard/js/chosen.jquery.min.js"></script>
<script src="/media/dashboard/js/bootstrap-tag.min.js"></script>
<script src="/media/js/parse.js"></script>

<script type="text/javascript">
	$(document).ready(function() {
		Parse.initialize('<%= keys.appId %>', '<%= keys.jsKey %>');
	
		// TODO: remove after creating other example
		$(".chzn-select").chosen({ 'width' : '220px' });
		
		var playerTagsInput = $('#player-tags-input');
		playerTagsInput.tag({ placeholder : playerTagsInput.attr('placeholder') });
		
		$("div.bar div.button").tooltip({
			hide: {
				effect: "explode",
				delay: 2500
			},
			show: {
				effect: "slideDown",
				delay: 2500
			}
		});
		
		$('#images-input-file').ace_file_input({
            no_file:'No File ...',
            btn_choose:'Choose',
            btn_change:'Select',
            droppable: false,
            onchange: null,
            thumbnail: true,
            whitelist: 'gif|png|jpg|jpeg',
            blacklist: 'exe|php'
        });
        
		function openModal() {
			$('.modal').modal('hide');
			var modal = $('#tag-modal');
			modal.appendTo($('body'));
			modal.modal();
		}
		
		window.loadImage = function() {
			var fileUploadControl = $("#images-input-file")[0];
	
	        if (fileUploadControl.files.length > 0) {
	            var file = fileUploadControl.files[0],
	                name = file.name;
	
	            var parseFile = new Parse.File(name, file);
	            parseFile.save().then(function(image) {
	                $('#image-preview').attr('src', image.url());
	                $('#comment-preview').html($('#add-image-comment').val());
	                openModal();
	            }, function(error) {
	                console.log(error);
	            });
	        } else {
	        	openModal();
	        }
	        
        };
		
		$('#create-spuds-buttons > div').modal({ 'show' : false });
		
		$('#create-spuds-buttons > div').click(function() {
			var modalID = $(this).attr('modal-id');
			var modal = $('' + modalID);
			modal.appendTo($('body'));
			modal.modal('show');
		});
		
		$('.create-spuds-modals .modal .next').on('click', function() {
			
		});
		
		$('.open-modal').on('click', function() {
			var modalID = $(this).attr('modal-id');
			$('.modal').modal('hide');
			var modal = $('' + modalID);
			modal.appendTo($('body'));
			modal.modal();
		});
	});
</script>

<% include ../parts/foot %>
